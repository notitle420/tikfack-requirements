# F07 検索 機能要件

## 1. 目的
- ユーザーが求める動画を効率よく見つけられるよう、キーワード検索機能を提供する。

## 2. 対象範囲・前提
- 年齢確認（F01）通過済みであること。
- ログイン／未ログインいずれでも利用できる。
- 検索対象はタイトル、出演者、ジャンル（取得可能な範囲）とする。

## 3. 機能概要
- キーワードと対象（タイトル／出演者／ジャンル）を指定して検索を実行し、縦スクロール UI で結果を表示する。
- 検索結果はページネーション対応とし、ページ末尾到達時に次ページを自動取得する。

## 4. 詳細要件
- 入力
  - キーワードは必須。
  - 検索対象（タイトル／出演者／ジャンル）は任意指定。未指定時は全体検索とする。
- 実行
  - バックエンドの検索 API にキーワードと対象を渡し、DMM API 等から取得した結果を返す。
  - ページネーション情報（次ページ有無、現在ページ）を含めて返却する。
  - 並び順は DMM API のレスポンス順をそのまま返却し、追加の重み付けや並べ替えは行わない。
- 表示
  - タイトル、出演者、発売日、外部サービス遷移リンクを各カードに表示し、動画再生（F02）に遷移できる。
  - 検索結果の縦スクロール UI は F02 のリスト表示仕様を流用する。
- ロギング
  - 検索クエリ、対象種別、結果件数、エラー有無を匿名 ID またはユーザー ID と紐付けて保存する。
 - キャッシュ
  - 検索結果はキャッシュせず、毎回 DMM API から取得する。

## 5. 入出力
- 入力: 検索キーワード、検索対象種別、ページ番号。
- 出力: 検索結果リスト（メタ情報、サンプル動画 URL、ページネーション情報）、検索イベントログ。

## 6. 関連
- F02 縦スクロール視聴・レコメンド: 検索結果の表示・再生に同 UI を利用。
- F03 動画メタ情報取得: 検索結果のメタ情報取得に利用。
- F04 外部サービス遷移: 検索結果からの外部遷移。
- F06/F10/F11 お気に入り: 検索結果からお気に入り操作を行う。

