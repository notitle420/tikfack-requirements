# フォローアップ質問（要件定義確認用）

要件定義書と各機能要件（F01〜F13）の叩き台を確認した上で、確定したい／深掘りしたいポイントをまとめました。回答いただければ、最終版の要件定義書に反映します。以下は回答結果を追記した最新版です。

## 1. 年齢確認（F-01）
- 許可状態の保持期間：現在は「セッション等で保持」とありますが、具体的な有効期限（例：ブラウザタブを閉じるまで／24時間／30日など）はどうしますか？ → **24時間**
- 端末・ブラウザをまたいだ場合の扱い：ログインユーザーは年齢確認をスキップする運用にしますか、それとも毎端末で確認しますか？ → **ログインユーザーはスキップ**

## 2. 縦型スクロール再生（F-02）
- プリフェッチ／先読みの要件：動画切替 1〜1.5 秒以内を満たすため、何本先まで事前ロードするか（例：現在の動画が 50% 再生されたら次の 2〜3 本を先読みなど）を決めたいです。 → **現在の動画が表示されたら次の動画を読み込み**
- 自動再生ポリシー：モバイルブラウザの自動再生制限に備え、無音での自動再生を必須にしますか？音声有効化はユーザー操作（タップ）を求めますか？ → **無音での自動再生、音声ONはユーザー操作**

## 3. 検索・発売日サーチ（F-07 / F-03）
- 検索対象のデフォルト：タイトル／出演者／ジャンルの「全体」検索時の検索順序や重みづけはどうしますか？ → **DMM API の結果順のまま**
- DMM API キャッシュの更新頻度：発売日別や検索結果のキャッシュ TTL を決めたいです（例：人気リストは 6 時間、検索結果は 30 分など）。 → **キャッシュ不要**

## 4. マイページ・お気に入り（F-05 / F-06 / F-10 / F-11 / F-12 / F-13）
- お気に入り上限と重複扱い：動画／ジャンル／女優それぞれの登録上限を設けますか？また、同一アイテムの重複登録はブロックでよいですか？ → **上限なし、重複なし**
- 並び順とソート：お気に入り一覧のデフォルト並び（追加日時降順でよいか）と、ユーザーによる並び替え／フィルタの要否を決めたいです。 → **追加日時順のみ**
- 未ログイン時の動線：マイページに到達した未ログインユーザーは必ずログイン画面へリダイレクトしますか？もしくは「ログイン／新規登録」案内を表示した上で一部情報（例：案内用ダミー一覧）を見せますか？ → **ログインを案内し、アカウントがない場合は作成へ遷移**
- ユーザー名変更の制約：最大文字数、使用可能文字（絵文字や記号を許容するか）、NG ワードや重複ユーザー名の扱いをどこまで厳格にしますか？ → **最大50字、NGワードなし、重複許容。ログインにはメールアドレスを使用**

## 5. 視聴ログ（F-08）
- 送信失敗時のリトライポリシー：最大リトライ回数やバックオフ、オンライン復帰時の再送タイミングを決めたいです。 → **リトライ5回、オンライン復帰した瞬間に再送**
- 保持期間と匿名化：視聴ログをどのくらい保持しますか（例：12 か月／無期限）？匿名 ID とユーザー ID の紐付けを削除するタイミングはありますか？ → **直近3ヶ月保持、紐付け削除なし**

## 6. レコメンド（F-09 / 要件定義 4.1）
- 更新頻度：レコメンドはリアルタイム更新を目指しますか、それとも日次／数時間間隔のバッチで十分ですか？ → **最初は日次バッチ、将来的にリアルタイムへ**
- コールドスタート戦略：視聴ログやお気に入りが少ない新規ユーザーには「最新／人気」以外に何か補完ロジック（例：トレンドジャンル）を入れますか？ → **最新/人気のみ**

## 7. 非機能要件
- 稼働時間帯（17:00〜28:00）の意味：サービス提供時間なのか、サポート対応時間なのかを明確にしたいです。サービス停止時間がある場合はメンテナンスページ表示などの挙動も定義が必要です。 → **サービス提供時間**
- 初期ロード性能：PWA 前提の場合、初回アクセスの Time to Interactive（TTI）や初期バンドル容量の目標値を設定しますか？ → **あり（目標値は任せる）**
- 対応ブラウザ／デバイス：サポート対象（例：iOS Safari/Chrome, Android Chrome, PC ブラウザ）の最低バージョンを明示しますか？ → **iOS Safari/Chrome、PC ウェブ対応。端末によってレスポンシブ対応**
- セキュリティ：API へのレート制限やボット対策（特に検索 API）を非機能要件として追加しますか？ → **追加する（値は任せる）**

## 8. 運用・監視
- ログモニタリング：DMM API 障害検知や視聴ログ収集失敗をどのような閾値・アラートで監視しますか？ → **実施しない。サーバーとフロントエンドのみ**
- KPI/指標のトラッキング：アフィリエイト遷移率、動画完走率、日次アクティブユーザーなど、追跡する主要 KPI を決めたいです。 → **日次アクティブユーザー50を目指す**

## 9. データ移行・削除
- データ削除ポリシー：ユーザー退会時に視聴ログやお気に入りをどう扱うか（即時削除／一定期間後に削除／匿名化）を決めたいです。 → **即時削除**
- 既存データ移行の有無：既に保持している動画メタデータやユーザー情報がある場合、移行の要否と方法を確認したいです。 → **移行なし**
