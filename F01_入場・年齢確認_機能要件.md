# F01 入場・年齢確認 機能要件

## 1. 目的
- R18コンテンツへの入場可否を簡易に判定し、未成年の閲覧を防ぐ。
- 以降の機能（視聴、検索、マイページなど）へ進む前提状態を作る。

## 2. 対象範囲・前提
- 年齢確認はサイト入場時に必須。
- 認証（ログイン）は不要。セッション/ローカルストレージで入場状態を保持し、ブラウザ再起動または期限切れで再確認。
- 「用語定義」は不要。本要件内では単純な文言で記載。

## 3. 機能概要
- 入場前に「本サイトは18歳以上向けです。18歳以上ですか？」の問いを表示し、「はい/いいえ」の2択を提供する。
- 「はい」選択時のみサービスへ入場できる。「いいえ」選択時は利用を停止し、外部遷移も行わない。
- 年齢確認をパスしていない場合、直接リンクでトップや検索にアクセスしても年齢確認画面へリダイレクトする。

## 4. 詳細要件
- 表示・遷移
  - サイト初回訪問時に年齢確認ダイアログ/ページを表示する。
  - 「はい」選択: 入場許可状態をセッションに保持し、トップ画面へ遷移。
  - 「いいえ」選択: 入場不可メッセージを表示し、以降の画面遷移をブロック。
- 入場状態の保持
  - セッション有効期間内は再確認不要とする。期間は設計段階で決定（例: ブラウザセッション単位）。
  - 状態が失効した場合は再度年齢確認を要求する。
- ロギング
  - 年齢確認の選択結果（許可/拒否）、タイムスタンプ、端末識別情報（Cookie/ブラウザ指紋までは行わない）をイベントログとして保存可能とする。
- エラーハンドリング
  - 外部要因で状態が保持できない場合（ストレージ不可など）は再確認を要求する。

## 5. 入出力
- 入力: ユーザー選択（はい/いいえ）。
- 出力: 入場可否フラグ、イベントログ。

## 6. 関連
- F02 縦スクロール視聴・レコメンド: 入場許可が前提。
- F03 検索・発売日サーチ: 入場許可が前提。
- F04 マイページ・お気に入り管理: 入場許可が前提。ログインは別途必要。
